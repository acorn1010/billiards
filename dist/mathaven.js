"use strict";(self.webpackChunkbilliards=self.webpackChunkbilliards||[]).push([[893],{"./src/mathaven.ts":(t,e,i)=>{var s=i("./src/model/physics/claude/constants.ts"),a=new(i("./src/model/physics/claude/geminipro.ts")).F(2,Math.PI/4,3/s.R,4/s.R);try{a.solve()}catch(t){console.error(t)}function o(t){return"hsl(".concat(137.5*t%360,", ").concat(70,"%, ").concat(50,"%)")}function n(t,e,i,s){return{x:t,y:e,name:i,line:{color:s,width:1.3},mode:"lines",type:"scatter"}}var r=function(t){return a.history.map(t)},l=r(function(t){return t.P}).map(function(t,e){return e}),h=[n(l,r(function(t){return t.s}),"s",o(0)),n(l,r(function(t){return t.phi}),"phi",o(1)),n(l,r(function(t){return t.sPrime}),"sPrime",o(2)),n(l,r(function(t){return t.phiPrime}),"phiPrime",o(3))];window.Plotly.newPlot("mathaven-div",h,{legend:{font:{color:"#4D5663"},bgcolor:"#e5e6F9"},xaxis:{title:"impulse",tickfont:{color:"#4D5663"},gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},yaxis:{title:"value",tickfont:{color:"#4D5663"},zeroline:!1,gridcolor:"#E1E5ED",titlefont:{color:"#4D5663"},zerolinecolor:"#E1E5ED"},plot_bgcolor:"#F5F6F9",paper_bgcolor:"#F2F6F9"},{responsive:!0,showLink:!0,plotlyServerURL:"https://chart-studio.plotly.com"})},"./src/model/physics/claude/constants.ts":(t,e,i)=>{i.d(e,{Hm:()=>l,M:()=>s,N:()=>c,R:()=>a,_m:()=>r,ee:()=>o,oV:()=>n,ye:()=>h});var s=.1406,a=.02625,o=.98,n=.212,r=.14,l=.4,h=Math.sqrt(21)/5,c=1e3},"./src/model/physics/claude/geminipro.ts":(t,e,i)=>{i.d(e,{F:()=>o});var s=i("./src/model/physics/claude/constants.ts");function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=/*#__PURE__*/function(){var t;function e(t,i,s,o){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),a(this,"state",void 0),a(this,"history",[]),a(this,"iter",0),console.log(t*Math.sin(i)),this.setInitialConditions(t,i,s,o)}return t=[{key:"setInitialConditions",value:function(t,e,i,s){this.state={P:0,WzI:0,xG_dot:t*Math.cos(e),yG_dot:t*Math.sin(e),zG_dot:0,θx_dot:-i*Math.sin(e),θy_dot:i*Math.cos(e),θz_dot:s,s:this.calculateInitialSlipSpeedI(t,e,i,s),phi:this.calculateInitialSlipAngleI(t,e,i,s),sPrime:this.calculateInitialSlipSpeedC(t,i),phiPrime:this.calculateInitialSlipAngleC(t,e,i)},console.log(JSON.stringify(this.state))}},{key:"calculateInitialSlipSpeedI",value:function(t,e,i,a){var o=t*Math.cos(e)+s.R*(i*Math.cos(e)*s.Hm-a*s.ye),n=-t*Math.sin(e)*s.Hm-s.R*i*Math.sin(e);return Math.sqrt(o*o+n*n)}},{key:"calculateInitialSlipSpeedC",value:function(t,e){return Math.abs(t-s.R*e)}},{key:"calculateInitialSlipAngleI",value:function(t,e,i,a){return Math.atan2(-t*Math.sin(e)*s.Hm-s.R*i*Math.sin(e),t*Math.cos(e)+s.R*(i*Math.cos(e)*s.Hm-a*s.ye))}},{key:"calculateInitialSlipAngleC",value:function(t,e,i){return t-s.R*i>0?e:Math.PI+e}},{key:"compressionPhase",value:function(){var t=(1+s.ee)*s.M*this.state.yG_dot/s.N;for(console.log("deltaP"+t);this.state.yG_dot>0;)this.updateSingleStep(t);return this.state}},{key:"restitutionPhase",value:function(t){for(var e=(1+s.ee)*s.M*this.state.yG_dot/s.N;this.state.WzI<t;)this.updateSingleStep(e);return this.state}},{key:"updateSingleStep",value:function(t){if(this.updateVelocities(t),this.updateAngularVelocities(t),this.updateSlipVelocities(),this.updateWorkDone(t),this.history.push(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){a(t,e,i[e])})}return t}({},this.state)),this.state.P+=t,this.iter++>2e3)throw console.log(this.state),"Solution not found"}},{key:"updateVelocities",value:function(t){this.state.xG_dot-=1/s.M*(s._m*Math.cos(this.state.phi)+s.oV*Math.cos(this.state.phiPrime)*(s.Hm+s._m*Math.sin(this.state.phi)*s.ye))*t,this.state.yG_dot-=1/s.M*(s.ye-s._m*s.Hm*Math.sin(this.state.phi)+s.oV*Math.sin(this.state.phiPrime)*(s.Hm+s._m*Math.sin(this.state.phi)*s.ye))*t}},{key:"updateAngularVelocities",value:function(t){this.state.θx_dot-=5/(2*s.M*s.R)*(s._m*Math.sin(this.state.phi)+s.oV*Math.sin(this.state.phiPrime)*(s.Hm+s._m*Math.sin(this.state.phi)*s.ye))*t,this.state.θy_dot-=5/(2*s.M*s.R)*(s._m*Math.cos(this.state.phi)*s.Hm-s.oV*Math.cos(this.state.phiPrime)*(s.Hm+s._m*Math.sin(this.state.phi)*s.ye))*t,this.state.θz_dot+=5/(2*s.M*s.R)*(s._m*Math.cos(this.state.phi)*s.ye)*t}},{key:"updateSlipVelocities",value:function(){var t=this.state.xG_dot+this.state.θy_dot*s.R*s.Hm-this.state.θz_dot*s.R*s.ye,e=-this.state.yG_dot*s.Hm+this.state.zG_dot*s.ye+this.state.θx_dot*s.R;this.state.s=Math.sqrt(t*t+e*e),this.state.phi=Math.atan2(e,t);var i=this.state.xG_dot-this.state.θy_dot*s.R,a=this.state.yG_dot+this.state.θx_dot*s.R;this.state.sPrime=Math.sqrt(i*i+a*a),this.state.phiPrime=Math.atan2(a,i)}},{key:"updateWorkDone",value:function(t){var e=-this.state.yG_dot*s.ye-this.state.zG_dot*s.Hm;this.state.WzI+=t/2*e*2}},{key:"solve",value:function(){var t=this.compressionPhase();console.log("Compression state complete at ",this.iter);var e=.8*t.WzI;return console.log("WzI",t.WzI),console.log("Target work rebound: ",e),this.restitutionPhase(e)}}],function(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(e.prototype,t),e}()}},t=>{t(t.s="./src/mathaven.ts")}]);